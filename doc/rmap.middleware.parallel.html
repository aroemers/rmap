<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>rmap.middleware.parallel documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Rmap 0.5.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rmap</span></div></div></li><li class="depth-2 branch"><a href="rmap.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="rmap.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3 branch"><a href="rmap.middleware.default.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>default</span></div></a></li><li class="depth-3 branch"><a href="rmap.middleware.examples.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>examples</span></div></a></li><li class="depth-3 branch current"><a href="rmap.middleware.parallel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parallel</span></div></a></li><li class="depth-3"><a href="rmap.middleware.sharing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sharing</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="rmap.middleware.parallel.html#var-parallel-middleware"><div class="inner"><span>parallel-middleware</span></div></a></li><li class="depth-1"><a href="rmap.middleware.parallel.html#var-parallel-rmap"><div class="inner"><span>parallel-rmap</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">rmap.middleware.parallel</h2><div class="doc"><pre class="plaintext">With this middleware you can add extra meta information about which
entries should be realized in parralel whenever another entry that
depends on those entries is requested.</pre></div><div class="public anchor" id="var-parallel-middleware"><h3>parallel-middleware</h3><div class="usage"><code>(parallel-middleware deps)</code></div><div class="doc"><pre class="plaintext">Create the parallel middleware with the given dependencies map. The
dependencies map is a map of collections. Whenever a key is
requested, the keys in the collection under the requested key in the
dependencies map are requested first in parallel, before realizing
the requested entry.

In most cases it is best practice to add this middleware after a
caching middleware, such as the default middleware.

Example:

(def r (rmap X {:a (do (Thread/sleep 1000) 1)
                :b (do (Thread/sleep 1000) 2)
                :c (+ (:a X) (:b X))}
             [(default-middleware)
              (parallel-middleware {:c [:b :a]})]))

(time (:c r))
;=&gt; Elapsed time: 1003.868562 msecs
;=&gt; 3</pre></div></div><div class="public anchor" id="var-parallel-rmap"><h3>parallel-rmap</h3><h4 class="type">macro</h4><div class="usage"><code>(parallel-rmap sym m deps)</code></div><div class="doc"><pre class="plaintext">A convenience macro for creating a recursive map with the parallel
middleware already added.</pre></div></div></div></body></html>